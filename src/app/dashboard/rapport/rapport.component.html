<div class="columns px-4 pt-6 has-background-light">
  <app-sidenav></app-sidenav>
  <div class="column pt-2">
    <app-profile></app-profile>
    <br />
    <p style="cursor: pointer" onclick="window.history.back()">
      <i class="mdi mdi-keyboard-return is-size-5"></i>
    </p>
    <section class="hero box p-0 my-4">
      <div class="p-4">
        <p class="title is-size-6">Rapports publié récemment</p>
        <p class="subtitle is-size-7 has-text-link">Aujourd'hui</p>
      </div>

      <div class="m-2">
        <button
          class="button is-small is-link p-2"
          routerLink="/dashboard/@{{ mobile }}/rapport/manage"
        >
          <i class="mdi mdi-draw has-text-white pr-2"></i> Publier un rapport
        </button>
      </div>
    </section>

    <div class="box">
      <div class="table-container">
        <table class="table is-striped is-narrow is-hoverable is-fullwidth">
          <thead class="is-size-7" *ngIf="RapportToDay.length> 0">
            <tr>
              <td>#ID</td>
              <td>#TITRE</td>
              <td>#COMMENTAIRE</td>
              <td>#DATE PUBLICATION</td>
              <td>#PIECE JOINTE</td>
              <td>#EDITER</td>
              <td>#SUPPRIMER</td>
            </tr>
          </thead>

          <tbody class="is-size-7" *ngIf="RapportToDay.length> 0 else empty">
            <tr *ngFor="let rapport of RapportToDay; let index = index ">
              <td class="py-4">{{ rapport.IDRAPPORT }}</td>
              <td class="py-4">{{ rapport.Titre }}</td>
              <td class="py-4">{{ rapport.Commentaire }}</td>
              <td class="py-4">{{ rapport.Date_creation }}</td>
               <td class="py-4">
                <button
                  class="button is-small is-link p-2"
                  (click)="redirect(true, false, rapport.IDRAPPORT)"
                >
                  <i class="mdi mdi-eye has-text-white pr-2"></i> Consulter
                </button>
              </td>
              <td class="py-4">
                <button
                  class="button is-small is-link p-2"
                  (click)="redirect(false, true, rapport.IDRAPPORT)"
                >
                  <i class="mdi mdi-draw has-text-white pr-2"></i> Editer
                </button>
              </td>
              <td class="py-4">
                <button
                  class="button is-small is-danger  localForage.setItem('preview', {
                    read:read,
                    edit:edit,
                    id:id
                  }) p-2"
                  (click)="detete(rapport.IDRAPPORT)"
                >
                  <i class="mdi mdi-delete has-text-white pr-2"></i> Supprimer
                </button>
            </tr>
          </tbody>

          <ng-template #empty>
            <div class="py-5">
              <img src="../../../assets/empty.svg" width="120px" alt="" srcset="">
              <p class="subtitle is-size-7 has-text-dark pt-2">Vous n'avez pas encore soumit votre rapport aujourd'hui</p>
            </div>
           </ng-template>
        </table>
      </div>
    </div>

    <section class="hero box p-0 my-4">
      <div class="hero-body p-4">
        <p class="title is-size-6">Mes Rapports</p>
        <p class="subtitle is-size-7 has-text-link">Tous</p>
      </div>
    </section>

    <div class="box">
      <div class="table-container">
        <table class="table is-striped is-narrow is-hoverable is-fullwidth">
          <thead class="is-size-7">
            <tr>
              <td>#ID</td>
              <td>#TITRE</td>
              <td>#COMMENTAIRE</td>
              <td>#DATE PUBLICATION</td>
              <td>#PIECE JOINTE</td>
              <td>#EDITER</td>
              <td>#SUPPRIMER</td>
            </tr>
          </thead>

          <tbody class="is-size-7">
            <tr *ngFor="let rapport of listRapport; let index = index">
              <td class="py-4">{{ rapport.IDRAPPORT }}</td>
              <td class="py-4">{{ rapport.Titre }}</td>
              <td class="py-4">{{ rapport.Commentaire }}</td>
              <td class="py-4">{{ rapport.Date_creation }}</td>
               <td class="py-4">
                <button
                  class="button is-small is-link p-2"
                  (click)="redirect(true, false, rapport.IDRAPPORT)"
                >
                  <i class="mdi mdi-eye has-text-white pr-2"></i> Consulter
                </button>
              </td>
              <td class="py-4">
                <button
                  class="button is-small is-link p-2"
                  (click)="redirect(false, true, rapport.IDRAPPORT)"
                >
                  <i class="mdi mdi-draw has-text-white pr-2"></i> Editer
                </button>
              </td>
              <td class="py-4">
                <button
                  class="button is-small is-danger p-2"
                  (click)="detete(rapport.IDRAPPORT)"
                >
                  <i class="mdi mdi-delete has-text-white pr-2"></i> Supprimer
                </button>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>
</div>
